<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embedded Scratch Project and YouTube Video with Help Sidebar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        h1, h2 {
            margin-left: 20px;
        }

        p, ul, a {
            margin-left: 20px;
            margin-right: 20px;
        }

        /* Style for fixed-size video, PDF, and images */
        iframe, img {
            width: 600px;
            height: 400px;
            margin: 20px;
            display: block;
        }

        /* Style for the PDF to make it twice the original size */
        embed {
            width: 1200px;
            height: 800px;
            margin: 20px;
            display: block;
        }

        /* Style for the buttons */
        .help-button {
            position: fixed;
            right: 0;
            top: 0;
            width: 200px;
            height: 20%;
            padding: 15px;
            background-color: blue;
            color: white;
            font-size: 18px;
            cursor: pointer;
            border: none;
            text-align: left;
            transition: background-color 0.3s;
            z-index: 1001;
        }

        .help-button:hover {
            background-color: darkblue;
        }

        /* Adjusting each button's position */
        #button1 { top: 0; }
        #button2 { top: 20%; }
        #button3 { top: 40%; }
        #button4 { top: 60%; }
        #button5 { top: 80%; }

        /* Style for the sidebar */
        .sidebar {
            height: 100%;
            width: 0;
            position: fixed;
            right: 0;
            top: 0;
            background-color: #111;
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
            color: white;
            z-index: 1000;
            overflow-y: auto;
        }

        .sidebar-content {
            padding: 20px;
            font-size: 18px;
        }

        /* Close button inside the sidebar (top left corner) */
        .closebtn {
            position: absolute;
            top: 0;
            left: 25px;
            font-size: 36px;
            color: white;
            cursor: pointer;
        }

        /* Adjustments for the word cloud image */
        #wordCloud {
            width: 100%;
            max-width: 600px;
            display: block;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <h1>Make a robot that can spin something</h1>
    <!-- Embedding the Scratch Project -->
    <iframe src="https://scratch.mit.edu/projects/1058042423/embed" allowtransparency="true" frameborder="0" scrolling="no" allowfullscreen></iframe>

    <h2>SPIN</h2>
    <p><strong>Context:</strong> Farm fence builder</p>
    
    <p><strong>Part one:</strong> Let’s talk about goals</p>
    <ul>
        <li>Why might digging be useful for a robot that helps on a farm?</li>
        <li>How can we code a (Lego, mBot, other) robot to dig?</li>
        <li>How can we build a robot that can dig?</li>
    </ul>
    
    <!-- Word Cloud Image Placeholder -->
    <img id="wordCloud" src="" alt="Word Cloud will appear here">

    <h2>Part two: Let’s code to spin our Scratch sprite</h2>

    <!-- Embedding the YouTube Video -->
    <iframe width="1200" height="800" src="https://www.youtube.com/embed/OchxUJBnOTs" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
    <p>Watch this video to see how you can incorporate spinning into your scratch model. Then click the link below to try it for yourself.</p>
    
    <!-- Link to Scratch Tutorial -->
    <p><a href="https://scratch.mit.edu/projects/1058042423/editor/" target="_blank">https://scratch.mit.edu/projects/editor/?tutorial=getStarted</a></p>
    
    <!-- Image for Scratch Tutorial -->
    <img src="diggerscratch.png" alt="Scratch Tutorial Image">

    <h2>Part 3: Let’s build our bot</h2>
    <p>Now that you’ve coded the spinning action, it’s time to bring your robot to life! Follow the instructions in the PDF below to build your digging robot.</p>
    
    <!-- Embedding the PDF (now twice the original size) -->
    <embed src="Digger.pdf" type="application/pdf">
    
    <!-- Instruction Below PDF Viewer -->
    <p>After building your bot, open the following URL: <a href="https://spike.legoeducation.com/prime/project" target="_blank">https://spike.legoeducation.com/prime/project</a>, input the code, and upload it to the digger bot. Plug the motor into port A.</p>
    
    <!-- Image for Building the Bot -->
    <img src="diggerlego.png" alt="Digger Lego Image">

    <!-- Download Link for LEGO Spike Prime Code -->
    <p><a href="Digger.llsp3" download="Digger.llsp3">Download Spike Prime Code: Digger.llsp3</a></p>
    
    <!-- Help buttons on the right side, full height -->
    <button id="button1" class="help-button" onclick="openSidebar('uploadCode')">HELP: Uploading code to LEGO Spike Robot</button>
    <button id="button2" class="help-button" onclick="openSidebar('codingLego')">HELP: Coding in LEGO Spike</button>
    <button id="button3" class="help-button" onclick="openSidebar('codingScratch')">HELP: Coding in Scratch</button>
    <button id="button4" class="help-button" onclick="openSidebar('pluggingMotors')">HELP: Lights, sensors and motors - how can we use them?</button>
    <button id="button5" class="help-button" onclick="openSidebar('legoProjects')">HELP: LEGO Spike Projects like this one</button>

    <!-- Sidebar for Uploading Code -->
    <div id="uploadCode" class="sidebar">
        <span class="closebtn" onclick="closeSidebar('uploadCode')">&times;</span>
        <div class="sidebar-content">
            <h2>Uploading Code to LEGO Spike Robot</h2>
            <p>Instructions for uploading code to your LEGO Spike Robot...</p>
        </div>
    </div>

    <!-- Sidebar for Coding in LEGO Spike -->
    <div id="codingLego" class="sidebar">
        <span class="closebtn" onclick="closeSidebar('codingLego')">&times;</span>
        <div class="sidebar-content">
            <h2>Coding in LEGO Spike</h2>
            <p>Instructions and tips for coding in LEGO Spike...</p>
        </div>
    </div>

    <!-- Sidebar for Coding in Scratch -->
    <div id="codingScratch" class="sidebar">
        <span class="closebtn" onclick="closeSidebar('codingScratch')">&times;</span>
        <div class="sidebar-content">
            <h2>Coding in Scratch</h2>
            <p>Instructions and tips for coding in Scratch...</p>
        </div>
    </div>

    <!-- Sidebar for Lights, Sensors, and Motors -->
    <div id="pluggingMotors" class="sidebar">
        <span class="closebtn" onclick="closeSidebar('pluggingMotors')">&times;</span>
        <div class="sidebar-content">
            <h2>Lights, sensors and motors - how can we use them?</h2>
            <p>Guide on how to use lights, sensors, and motors with your LEGO Spike Robot...</p>
            <p>Navigate to this link: <a href="https://spike.legoeducation.com/prime/start/" target="_blank" style="color: lightblue;">https://spike.legoeducation.com/prime/start/</a></p>
            <!-- Including the tutorials image -->
            <img src="tutorials.JPG" alt="Tutorials Image">
        </div>
    </div>

    <!-- Sidebar for LEGO Spike Projects like this one -->
    <div id="legoProjects" class="sidebar">
        <span class="closebtn" onclick="closeSidebar('legoProjects')">&times;</span>
        <div class="sidebar-content">
            <h2>LEGO Spike Projects like this one</h2>
            <p>Explore more LEGO Spike projects similar to this one...</p>
        </div>
    </div>

    <script>
        /* Function to close all sidebars */
        function closeAllSidebars() {
            var sidebars = document.querySelectorAll('.sidebar');
            sidebars.forEach(function(sidebar) {
                sidebar.style.width = '0';
            });
        }

        /* Function to open a specific sidebar and close the others */
        function openSidebar(id) {
            closeAllSidebars(); // Close any open sidebar
            var sidebar = document.getElementById(id);
            sidebar.style.width = "70%";
            sidebar.scrollTop = 0; // Scroll to top
        }

        /* Function to close a specific sidebar */
        function closeSidebar(id) {
            document.getElementById(id).style.width = "0";
        }

        async function generateWordCloud() {
            try {
                // Step 1: Fetch the content from your GitHub file
                const githubUrl = 'https://gtacaus.github.io/legobots/wordcloud.txt';
                const response = await fetch(githubUrl);
                
                if (!response.ok) {
                    throw new Error('Failed to fetch the text content');
                }
                
                const article = await response.text();

                // Step 2: Generate the word cloud using QuickChart API
                const wordCloudResponse = await fetch('https://quickchart.io/wordcloud', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        format: 'png',
                        width: 600,
                        height: 400,
                        fontScale: 15,
                        scale: 'linear',
                        removeStopwords: true,
                        minWordLength: 4,
                        text: article
                    })
                });

                if (!wordCloudResponse.ok) {
                    throw new Error('Failed to generate word cloud');
                }

                const wordCloudBlob = await wordCloudResponse.blob();
                const wordCloudUrl = URL.createObjectURL(wordCloudBlob);

                // Step 3: Display the word cloud image in the HTML
                document.getElementById('wordCloud').src = wordCloudUrl;

            } catch (error) {
                console.error('Error:', error);
                document.getElementById('wordCloud').alt = 'Failed to load word cloud';
            }
        }

        // Generate the word cloud when the page loads
        generateWordCloud();
    </script>

</body>
</html>
